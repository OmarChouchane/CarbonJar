#!/usr/bin/env sh
echo "Running typecheck and tests before push..."

# Prefer Windows npm.cmd if available to avoid bash dependency in GitHub Desktop's MinGit
if command -v npm.cmd >/dev/null 2>&1; then
	NPM_CMD="npm.cmd"
else
	NPM_CMD="npm"
fi

"$NPM_CMD" run typecheck && "$NPM_CMD" test
